services:
  whatsapp-bot:
    build: .
    container_name: whatsapp-bot
    restart: always

    # ðŸ”¥ INTERACTIVO ACTIVADO
    tty: true
    stdin_open: true

    volumes:
      - whatsapp_sessions:/usr/src/app/Sessions

    expose:
      - "8080"

    env_file:
      - .env

  admin-panel:
    build: ./frontend-next
    container_name: admin-panel
    restart: always

    tty: true
    stdin_open: true

    expose:
      - "3000"

    env_file:
      - .env

  nginx:
    image: nginx:alpine
    container_name: konmi-nginx
    restart: always

    ports:
      - "80:80"
      - "443:443"

    volumes:
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf:ro
      - /etc/letsencrypt:/etc/letsencrypt:ro

    depends_on:
      - whatsapp-bot
      - admin-panel

volumes:
  whatsapp_sessions:
